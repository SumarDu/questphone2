# –í—ñ–¥–∂–µ—Ç –°–ø–∏—Å–∫—É –ö–≤–µ—Å—Ç—ñ–≤ - –®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç

## üéØ –©–æ —Ü–µ?

–í—ñ–¥–∂–µ—Ç –¥–ª—è –¥–æ–º–∞—à–Ω—å–æ–≥–æ –µ–∫—Ä–∞–Ω—É Android, —è–∫–∏–π –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –≤–∞—à—ñ –∫–≤–µ—Å—Ç–∏ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ —É –≤–∏–≥–ª—è–¥—ñ –∫—Ä–∞—Å–∏–≤–∏—Ö –ø–ª–∏—Ç–æ–∫ –∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É.

## üì± –Ø–∫ –¥–æ–¥–∞—Ç–∏ –≤—ñ–¥–∂–µ—Ç

1. **–î–æ–≤–≥–∏–π –Ω–∞—Ç–∏—Å–∫** –Ω–∞ –≤—ñ–ª—å–Ω–æ–º—É –º—ñ—Å—Ü—ñ —Ä–æ–±–æ—á–æ–≥–æ —Å—Ç–æ–ª—É
2. –í–∏–±–µ—Ä—ñ—Ç—å **"–í—ñ–¥–∂–µ—Ç–∏"** –≤ –º–µ–Ω—é
3. –ó–Ω–∞–π–¥—ñ—Ç—å **"QuestPhone"**
4. –í–∏–±–µ—Ä—ñ—Ç—å **"Today's Quest List Widget"**
5. –ü–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å –Ω–∞ —Ä–æ–±–æ—á–∏–π —Å—Ç—ñ–ª —ñ –≤—ñ–¥–ø—É—Å—Ç—ñ—Ç—å

## üé® –î–∏–∑–∞–π–Ω –ø–ª–∏—Ç–∫–∏

–ö–æ–∂–µ–Ω –∫–≤–µ—Å—Ç –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —è–∫ –ø–ª–∏—Ç–∫–∞ –∑:

### –ö–æ–ª—å–æ—Ä–æ–≤–∞ —Å–º—É–∂–∫–∞ (–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç):
- üî¥ **–ß–µ—Ä–≤–æ–Ω–∏–π** - –í–∞–∂–ª–∏–≤–æ —ñ –¢–µ—Ä–º—ñ–Ω–æ–≤–æ
- üü¢ **–ó–µ–ª–µ–Ω–∏–π** - –í–∞–∂–ª–∏–≤–æ –∞–ª–µ –Ω–µ –¢–µ—Ä–º—ñ–Ω–æ–≤–æ  
- üü° **–ë–µ–∂–µ–≤–∏–π** - –ù–µ –≤–∞–∂–ª–∏–≤–æ –∞–ª–µ –¢–µ—Ä–º—ñ–Ω–æ–≤–æ
- üîµ **–°–∏–Ω—ñ–π** - –°—Ç–∞–±—ñ–ª—å–Ω–∏–π
- ‚ö™ **–°—ñ—Ä–∏–π** - –ù–µ –≤–∞–∂–ª–∏–≤–æ —ñ –Ω–µ –¢–µ—Ä–º—ñ–Ω–æ–≤–æ

### –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:
- **–ù–∞–∑–≤–∞ –∫–≤–µ—Å—Ç–∞** (–∂–∏—Ä–Ω–∏–º)
- **–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "2h 30m")
- **–ß–∞—Å –ø–æ—á–∞—Ç–∫—É** (—è–∫—â–æ —î)
- **–ß–∞—Å –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è** (—è–∫—â–æ —î)
- **‚è∞ –î–µ–¥–ª–∞–π–Ω** (—á–µ—Ä–≤–æ–Ω–∏–º, —è–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)

## ‚ö° –Ø–∫ –ø—Ä–∞—Ü—é—î

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- –í—ñ–¥–∂–µ—Ç –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è **–∫–æ–∂–Ω—ñ 30 —Ö–≤–∏–ª–∏–Ω**
- –ü–æ–∫–∞–∑—É—î —Ç—ñ–ª—å–∫–∏ **–∞–∫—Ç–∏–≤–Ω—ñ –∫–≤–µ—Å—Ç–∏** –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
- –ö–≤–µ—Å—Ç–∏ —Å–æ—Ä—Ç—É—é—Ç—å—Å—è **–∑–∞ —á–∞—Å–æ–º –ø–æ—á–∞—Ç–∫—É**

### –í–∑–∞—î–º–æ–¥—ñ—è
- **–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫** ‚Üí –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –≥–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω
- **–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –ø–ª–∏—Ç–∫—É** ‚Üí –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –¥–æ–¥–∞—Ç–æ–∫
- **–ö–Ω–æ–ø–∫–∞ "Open App"** ‚Üí —à–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –¥–æ–¥–∞—Ç–∫—É

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏:
```
widgets/
  ‚îî‚îÄ‚îÄ QuestListWidget.kt        # –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–¥ –≤—ñ–¥–∂–µ—Ç—É
  
res/
  ‚îú‚îÄ‚îÄ xml/
  ‚îÇ   ‚îú‚îÄ‚îÄ quest_list_widget.xml      # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
  ‚îÇ   ‚îî‚îÄ‚îÄ glance_default_loading_layout.xml
  ‚îú‚îÄ‚îÄ xml-v31/
  ‚îÇ   ‚îî‚îÄ‚îÄ quest_list_widget.xml      # –î–ª—è Android 12+
  ‚îú‚îÄ‚îÄ drawable/
  ‚îÇ   ‚îî‚îÄ‚îÄ quest_widget_preview.xml   # –ü—Ä–µ–≤'—é
  ‚îî‚îÄ‚îÄ values/
      ‚îî‚îÄ‚îÄ strings.xml                 # –¢–µ–∫—Å—Ç–∏
```

### –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (–≤ build.gradle.kts):
```kotlin
implementation("androidx.glance:glance-appwidget:1.1.0")
implementation("androidx.glance:glance-material3:1.1.0")
```

## üêõ –£—Å—É–Ω–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –í—ñ–¥–∂–µ—Ç –Ω–µ –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫—É
```bash
# 1. –û—á–∏—Å—Ç–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç
Build ‚Üí Clean Project ‚Üí Rebuild Project

# 2. –ü–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫
adb uninstall neth.iecal.questphone
./gradlew installDebug
```

### –í—ñ–¥–∂–µ—Ç –Ω–µ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è
```bash
# 1. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É
adb reboot

# 2. –ü–µ—Ä–µ—Å—Ç–∞–≤–∏—Ç–∏ –≤—ñ–¥–∂–µ—Ç
# –í–∏–¥–∞–ª—ñ—Ç—å –≤—ñ–¥–∂–µ—Ç —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –∑–∞–Ω–æ–≤–æ
```

### –î–∏–≤–∏—Ç–∏—Å—è –ª–æ–≥–∏
```bash
adb logcat | grep -i "glance\|widget\|quest"
```

## üìù –©–æ –º–æ–∂–Ω–∞ –ø–æ–∫—Ä–∞—â–∏—Ç–∏

### –ö–æ—Ä–æ—Ç–∫–æ—Å—Ç—Ä–æ–∫–æ–≤–æ:
- [ ] –î–æ–¥–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é (Today/Tomorrow/Weekend)
- [ ] –ü–æ–∑–Ω–∞—á–∞—Ç–∏ –∫–≤–µ—Å—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–∏–º–∏ –∑ –≤—ñ–¥–∂–µ—Ç—É
- [ ] –î–æ–¥–∞—Ç–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—É –ø—ñ–¥–∑–∞–¥–∞—á

### –î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ:
- [ ] –ö—ñ–ª—å–∫–∞ —Ä–æ–∑–º—ñ—Ä—ñ–≤ –≤—ñ–¥–∂–µ—Ç—É (1√ó1, 2√ó2, 4√ó3)
- [ ] –¢–µ–º–Ω–∞/—Å–≤—ñ—Ç–ª–∞ —Ç–µ–º–∞
- [ ] –ö–∞—Å—Ç–æ–º–Ω—ñ –∫–æ–ª—å–æ—Ä–∏
- [ ] –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ –∑ –≤—ñ–¥–∂–µ—Ç—É

## üéØ –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:
```kotlin
// –í—ñ–¥–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∑—É—î –∫–≤–µ—Å—Ç–∏ —á–µ—Ä–µ–∑ Flow
val quests by repo.getTodayQuests().collectAsState(initial = emptyList())
```

### –†—É—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:
```kotlin
// –ó –±—É–¥—å-—è–∫–æ–≥–æ –º—ñ—Å—Ü—è –≤ –¥–æ–¥–∞—Ç–∫—É
val manager = GlanceAppWidgetManager(context)
val glanceIds = manager.getGlanceIds(QuestListWidget::class.java)
glanceIds.forEach { QuestListWidget().update(context, it) }
```

## üìö –†–µ—Å—É—Ä—Å–∏

- **Jetpack Glance**: https://developer.android.com/jetpack/androidx/releases/glance
- **App Widgets**: https://developer.android.com/guide/topics/appwidgets
- **Grit —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π**: https://github.com/shub39/Grit

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- [ ] –í—ñ–¥–∂–µ—Ç –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫—É –≤—ñ–¥–∂–µ—Ç—ñ–≤
- [ ] –í—ñ–¥–∂–µ—Ç –¥–æ–¥–∞—î—Ç—å—Å—è –Ω–∞ —Ä–æ–±–æ—á–∏–π —Å—Ç—ñ–ª
- [ ] –ü–æ–∫–∞–∑—É—é—Ç—å—Å—è –∫–≤–µ—Å—Ç–∏ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω—ñ –∫–æ–ª—å–æ—Ä–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—ñ–≤
- [ ] –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å
- [ ] –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —á–∞—Å (—è–∫—â–æ –Ω–µ all-day)
- [ ] –î–µ–¥–ª–∞–π–Ω –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è —á–µ—Ä–≤–æ–Ω–∏–º
- [ ] –ù–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –≤—ñ–¥–∫—Ä–∏–≤–∞—î –¥–æ–¥–∞—Ç–æ–∫
- [ ] –í—ñ–¥–∂–µ—Ç –∑–º—ñ–Ω—é—î —Ä–æ–∑–º—ñ—Ä
- [ ] –ü—Ä–∞—Ü—é—î –Ω–∞ Android 8+

---

**–í–µ—Ä—Å—ñ—è**: 1.0  
**–î–∞—Ç–∞**: 2025-01-20  
**–ë–∞–∑–æ–≤–∞–Ω–æ –Ω–∞**: Grit widgets implementation
